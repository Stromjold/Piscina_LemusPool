<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Familiar - Plantilla Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="css/family.css">
    <style>
        /* Calendario - estilos para plantilla Family */
        #calendario .calendar-header { display:flex; align-items:center; justify-content:center; gap:16px; margin-bottom:16px; }
        #calendario .calendar-title { font-weight:700; margin:0; color:#0d6efd; }
        #calendario .nav-btn { background:#fff; border:1px solid #dee2e6; padding:8px 12px; border-radius:6px; color:#0d6efd; }
        #calendario .nav-btn:hover { background:#e9f2ff; }
        #calendario .calendar-container { display:grid; grid-template-columns:repeat(7,1fr); gap:8px; padding:8px; }
        #calendario .calendar-day-header { text-align:center; font-weight:700; padding:8px 0; color:#6c757d; }
        #calendario .calendar-admin-day { min-height:72px; border-radius:8px; padding:8px; background:#ffffff; border:1px solid #f1f3f5; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer; }
        #calendario .calendar-admin-day .day-number { font-weight:700; color:#212529; }
        #calendario .calendar-admin-day .day-status { font-size:12px; color:#6c757d; }
        #calendario .calendar-admin-day.occupied { background:linear-gradient(90deg,#ffecec,#fff7f7); border-color:#ffb3b3; }
        @media (max-width:768px) { #calendario .calendar-container { grid-template-columns:repeat(7,1fr); } }
    </style>
</head>
<body class="template-family">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #f0f8ff;">
        <div class="container">
            <a class="navbar-brand fw-bolder" href="#!"><i class="bi bi-sun-fill text-warning"></i> AquaFun</a>
            <div class="ms-auto">
                <a href="#!" class="btn btn-primary rounded-pill px-4">¡Reservar!</a>
                <a href="#" data-site="family" data-type="admin" class="btn btn-secondary rounded-pill px-4">Administración</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="container text-center py-5">
        <h1 class="display-2 fw-bolder">¡Un Día Genial en Familia!</h1>
        <p class="lead text-muted">Diversión garantizada para todas las edades.</p>
        <img src="Image/image2.jpg" class="img-fluid rounded-5 my-4" alt="Familia feliz en la piscina">
    </header>

    <!-- Features Section -->
    <main class="container my-5">
        <section class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="p-4">
                    <i class="bi bi-droplet-half fs-1 text-primary"></i>
                    <h3 class="fw-bolder my-3">Piscinas Seguras</h3>
                    <p>Zonas de poca profundidad y vigilancia constante para la tranquilidad de los padres.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="p-4">
                    <i class="bi bi-joystick fs-1 text-danger"></i>
                    <h3 class="fw-bolder my-3">Juegos y Actividades</h3>
                    <p>Animadores, juegos en el agua y muchas sorpresas para que no pare la diversión.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="p-4">
                    <i class="bi bi-egg-fried fs-1 text-success"></i>
                    <h3 class="fw-bolder my-3">Menú para Niños</h3>
                    <p>Opciones deliciosas y saludables que les encantarán a los más pequeños de la casa.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- CTA Section -->
    <section class="py-5" style="background-color: #fffbe6;">
        <div class="container text-center">
            <h2 class="fw-bolder">¿Listos para la Aventura?</h2>
            <p>Consulta nuestros pases de día y ofertas especiales.</p>
            <a href="#!" class="btn btn-warning btn-lg rounded-pill px-5">Ver Precios</a>
        </div>
    </section>

    <section id="calendario" class="section bg-light">
        <div class="container">
            <h2>Disponibilidad</h2>
            <p>Revisa nuestro calendario para ver los días disponibles para tu reserva. Los días en rojo ya están ocupados.</p>
            
            <div class="calendar-header">
                <button class="nav-btn" onclick="changeMonth(-1)" aria-label="Mes anterior" title="Mes anterior"><i class="fas fa-chevron-left"></i></button>
                <h3 id="calendarAdminTitle" class="calendar-title">Mes Año</h3>
                <button class="nav-btn" onclick="changeMonth(1)" aria-label="Mes siguiente" title="Mes siguiente"><i class="fas fa-chevron-right"></i></button>
            </div>
            
            <div id="calendarAdmin" class="calendar-container" aria-live="polite">
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-4 mt-4">
        <div class="container text-center">
            <p class="text-muted">AquaFun Park &copy; 2025</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Calendar Management (Family template) - public pages read-only
        let currentMonth = 10; // Noviembre (0-indexed)
        let currentYear = 2025;
        let occupiedDays = {};

        const isAdminPage = /\/administracion\//i.test(window.location.pathname) || /admin_/.test(window.location.pathname) || /admin\.php$/i.test(window.location.pathname);

        function generateCalendarAdmin() {
            const calendar = document.getElementById('calendarAdmin');
            if (!calendar) return;
            calendar.innerHTML = '';
            
            const days = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];
            days.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                calendar.appendChild(header);
            });
            
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            
            for (let i = 0; i < firstDay; i++) {
                const empty = document.createElement('div');
                calendar.appendChild(empty);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-admin-day';
                const key = `${currentYear}-${currentMonth}-${day}`;
                
                if (occupiedDays[key]) {
                    dayEl.classList.add('occupied');
                }
                
                dayEl.innerHTML = `
                    <span class="day-number">${day}</span>
                    <span class="day-status">${occupiedDays[key] ? 'Ocupado' : 'Libre'}</span>
                `;

                if (isAdminPage) {
                    dayEl.style.cursor = 'pointer';
                    dayEl.onclick = () => toggleDay(key, dayEl);
                } else {
                    dayEl.style.cursor = 'default';
                }

                calendar.appendChild(dayEl);
            }
        }

        function toggleDay(key, element) {
            if (!isAdminPage) return;
            occupiedDays[key] = !occupiedDays[key];
            if (occupiedDays[key]) {
                element.classList.add('occupied');
                element.querySelector('.day-status').textContent = 'Ocupado';
            } else {
                element.classList.remove('occupied');
                element.querySelector('.day-status').textContent = 'Libre';
            }
        }

        function changeCalendarMonth(delta) {
            currentMonth += delta;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            
            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                          'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            const title = document.getElementById('calendarAdminTitle');
            if (title) title.textContent = `${months[currentMonth]} ${currentYear}`;
            generateCalendarAdmin();
        }

        // Alias para mantener compatibilidad con onclick de plantilla
        function changeMonth(delta) { changeCalendarMonth(delta); }

        function saveCalendar() {
            if (!isAdminPage) return;
            try { localStorage.setItem('admin_occupiedDays', JSON.stringify(occupiedDays)); } catch(e){ }
            alert('Calendario guardado exitosamente');
        }

        function resetCalendar() {
            if (!isAdminPage) return;
            if (confirm('¿Estás seguro de restablecer el calendario?')) {
                occupiedDays = {};
                localStorage.removeItem('admin_occupiedDays');
                generateCalendarAdmin();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Cargar días ocupados
            try {
                const raw = localStorage.getItem('admin_occupiedDays');
                if (raw) occupiedDays = JSON.parse(raw);
            } catch(e) { occupiedDays = {}; }

            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                          'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            const title = document.getElementById('calendarAdminTitle');
            if (title) title.textContent = `${months[currentMonth]} ${currentYear}`;
            generateCalendarAdmin();

            if (!isAdminPage) {
                // desactivar botones inline
                document.querySelectorAll('#calendario .nav-btn[onclick], .calendar-header .nav-btn[onclick]').forEach(btn => {
                    try { btn.removeAttribute('onclick'); btn.disabled = true; btn.style.cursor = 'default'; } catch(e){}
                });
            }
        });
    </script>
    <script src="/vendedor/Direccion/controlador.js"></script>
</body>
</html>
